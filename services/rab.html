<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>KALKULATOR PLAFON PVC - DETAIL PER BAGIAN</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #f8f9fa;
            --dark: #343a40;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            border-left: 5px solid var(--secondary);
        }

        .header h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 28px;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 16px;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        @media (max-width: 992px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border-top: 4px solid var(--secondary);
        }

        .panel h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--light);
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel h2::before {
            content: '';
            display: block;
            width: 8px;
            height: 25px;
            background: var(--secondary);
            border-radius: 4px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 3px solid var(--warning);
        }

        label {
            display: block;
            margin: 12px 0 6px;
            font-weight: 500;
            color: var(--primary);
            font-size: 14px;
        }

        input[type="number"],
        select,
        input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
        }

        input[type="number"]:focus,
        select:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin: 10px 0;
        }

        .radio-group label {
            background: var(--light);
            padding: 10px 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: normal;
            margin: 0;
            text-align: center;
            font-size: 13px;
        }

        .radio-group label:hover {
            border-color: var(--secondary);
            background: #e1f0fa;
        }

        .radio-group input[type="radio"]:checked + label {
            border-color: var(--secondary);
            background: #e1f0fa;
            font-weight: 600;
            color: var(--secondary);
        }

        .radio-group input[type="radio"] {
            display: none;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 10px 0;
        }

        .btn-calculate {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-calculate:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .results-panel {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-top: 25px;
            border-top: 4px solid var(--success);
        }

        .material-card {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--success);
        }

        .material-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dee2e6;
        }

        .material-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }

        .material-qty {
            font-size: 24px;
            font-weight: 700;
            color: var(--danger);
        }

        .material-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .detail-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid #e1e8ed;
        }

        .detail-label {
            font-size: 13px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
        }

        .bagian-detail {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e1e8ed;
            margin: 10px 0;
        }

        .bagian-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--light);
        }

        .cost-summary {
            background: linear-gradient(135deg, var(--success), #219653);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            margin: 25px 0;
        }

        .cost-total {
            font-size: 36px;
            font-weight: 700;
            margin: 10px 0;
        }

        .tab-container {
            display: flex;
            border-bottom: 2px solid #dee2e6;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 25px;
            background: none;
            border: none;
            font-size: 15px;
            font-weight: 500;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: var(--secondary);
            border-bottom-color: var(--secondary);
            font-weight: 600;
        }

        .tab:hover:not(.active) {
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .hollow-tambahan-box {
            background: #fff8e1;
            border: 1px solid #ffd54f;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .note-box {
            background: #e8f4fd;
            border: 1px solid #b3e0ff;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 14px;
        }

        @media print {
            .btn-calculate,
            .tab-container {
                display: none;
            }

            .results-panel {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>üßÆ KALKULATOR PLAFON PVC - DETAIL PER BAGIAN</h1>
        <p class="subtitle">Perhitungan terpisah untuk setiap bagian plafon (filed, drop, border)</p>
    </div>

    <div class="container">
        <!-- PANEL KIRI: INPUT DATA -->
        <div class="panel">
            <h2>üìê DATA RUANGAN & PLAFON</h2>

            <div class="tab-container">
                <button class="tab active" onclick="switchTab('ukuran')">Ukuran</button>
                <button class="tab" onclick="switchTab('model')">Model</button>
                <button class="tab" onclick="switchTab('material')">Material</button>
            </div>

            <!-- TAB 1: UKURAN -->
            <div id="tab-ukuran" class="tab-content active">
                <div class="section">
                    <div class="section-title">üìè UKURAN RUANGAN</div>
                    <div class="input-row">
                        <div>
                            <label>Panjang (m)</label>
                            <input type="number" id="panjang" placeholder="4.0" step="0.01" min="1" value="4.0" oninput="updateLuas()">
                        </div>
                        <div>
                            <label>Lebar (m)</label>
                            <input type="number" id="lebar" placeholder="3.0" step="0.01" min="1" value="3.0" oninput="updateLuas()">
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <div style="font-size: 18px; font-weight: bold; color: var(--primary);">Luas Ruangan</div>
                        <div style="font-size: 24px; color: var(--danger); margin-top: 5px;" id="luasDisplay">12.00 m¬≤</div>
                    </div>
                </div>

                <div class="hollow-tambahan-box">
                    <div class="section-title">‚ûï HOLLOW TAMBAHAN</div>
                    <div class="input-row">
                        <div>
                            <label>Jumlah Batang</label>
                            <input type="number" id="tambahHollow" placeholder="0" min="0" max="50" value="0">
                        </div>
                        <div>
                            <label>Tipe Hollow</label>
                            <select id="tipeHollowTambahan">
                                <option value="4x2">4√ó2 cm</option>
                                <option value="4x4">4√ó4 cm</option>
                            </select>
                        </div>
                    </div>
                    <div style="font-size: 12px; color: #666; margin-top: 10px;">
                        *Untuk gantungan plafon atau keperluan khusus di lapangan
                    </div>
                </div>
            </div>

            <!-- TAB 2: MODEL -->
            <div id="tab-model" class="tab-content">
                <div class="section">
                    <div class="section-title">üé® MODEL PLAFON</div>
                    <div class="radio-group">
                        <input type="radio" name="modelPlafon" id="flat" value="flat" checked onchange="updateModelSettings()">
                        <label for="flat">Flat 1 Warna</label>
                        
                        <input type="radio" name="modelPlafon" id="flat2warna" value="flat2warna" onchange="updateModelSettings()">
                        <label for="flat2warna">Flat 2 Warna</label>
                        
                        <input type="radio" name="modelPlafon" id="dropPinggir" value="dropPinggir" onchange="updateModelSettings()">
                        <label for="dropPinggir">Drop Pinggir</label>
                        
                        <input type="radio" name="modelPlafon" id="dropTengah" value="dropTengah" onchange="updateModelSettings()">
                        <label for="dropTengah">Drop Tengah</label>
                        
                        <input type="radio" name="modelPlafon" id="dropGabungan" value="dropGabungan" onchange="updateModelSettings()">
                        <label for="dropGabungan">Drop Gabungan</label>
                    </div>
                </div>

                <!-- SETTINGS FLAT 2 WARNA -->
                <div id="settingsFlat2warna" class="section" style="display: none;">
                    <div class="section-title">üìè SETTINGS FLAT 2 WARNA</div>
                    <div class="input-row">
                        <div>
                            <label>Lebar Border (cm)</label>
                            <input type="number" id="lebarBorder" placeholder="40" min="20" max="100" value="40" step="5">
                        </div>
                    </div>
                </div>

                <!-- SETTINGS DROP PINGGIR -->
                <div id="settingsDropPinggir" class="section" style="display: none;">
                    <div class="section-title">üìè SETTINGS DROP PINGGIR</div>
                    <div class="input-row">
                        <div>
                            <label>Lebar Drop (cm)</label>
                            <input type="number" id="lebarDropPinggir" placeholder="40" min="30" max="100" value="40" step="5">
                        </div>
                        <div>
                            <label>Tinggi Turun (cm)</label>
                            <input type="number" id="tinggiDropPinggir" placeholder="15" min="5" max="30" value="15" step="1">
                        </div>
                    </div>
                </div>

                <!-- SETTINGS DROP TENGAH -->
                <div id="settingsDropTengah" class="section" style="display: none;">
                    <div class="section-title">üìè SETTINGS DROP TENGAH</div>
                    <div class="input-row">
                        <div>
                            <label>Jarak dari Dinding (cm)</label>
                            <input type="number" id="jarakDropTengah" placeholder="50" min="30" max="200" value="50" step="5">
                        </div>
                        <div>
                            <label>Lebar Filed Pinggir (cm)</label>
                            <input type="number" id="lebarFiledDropTengah" placeholder="60" min="30" max="200" value="60" step="5">
                        </div>
                    </div>
                    <div class="input-row">
                        <div>
                            <label>Tinggi Turun (cm)</label>
                            <input type="number" id="tinggiDropTengah" placeholder="20" min="5" max="30" value="20" step="1">
                        </div>
                    </div>
                </div>

                <!-- SETTINGS DROP GABUNGAN -->
                <div id="settingsDropGabungan" class="section" style="display: none;">
                    <div class="section-title">üìè SETTINGS DROP GABUNGAN</div>
                    <div class="input-row">
                        <div>
                            <label>Lebar Drop Pinggir (cm)</label>
                            <input type="number" id="lebarDropGabPinggir" placeholder="30" min="20" max="80" value="30" step="5">
                        </div>
                        <div>
                            <label>Tinggi Drop Pinggir (cm)</label>
                            <input type="number" id="tinggiDropGabPinggir" placeholder="10" min="5" max="20" value="10" step="1">
                        </div>
                    </div>
                    <div class="input-row">
                        <div>
                            <label>Lebar Filed (cm)</label>
                            <input type="number" id="lebarFiledGabungan" placeholder="50" min="30" max="150" value="50" step="5">
                        </div>
                        <div>
                            <label>Tinggi Drop Tengah (cm)</label>
                            <input type="number" id="tinggiDropGabTengah" placeholder="20" min="10" max="30" value="20" step="1">
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 3: MATERIAL -->
            <div id="tab-material" class="tab-content">
                <div class="section">
                    <div class="section-title">üß± MATERIAL PVC</div>
                    <div class="input-row">
                        <div>
                            <label>Panjang PVC</label>
                            <select id="panjangPVC">
                                <option value="3">3 meter</option>
                                <option value="4" selected>4 meter</option>
                                <option value="5">5 meter</option>
                            </select>
                        </div>
                        <div>
                            <label>Lebar PVC</label>
                            <select id="lebarPVC">
                                <option value="0.20" selected>20 cm</option>
                                <option value="0.25">25 cm</option>
                                <option value="0.30">30 cm</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row">
                        <div>
                            <label>Kualitas PVC</label>
                            <select id="kualitasPVC">
                                <option value="standard">Standard</option>
                                <option value="sni">SNI</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üî© RANGKA HOLLOW</div>
                    <div class="input-row">
                        <div>
                            <label>Jarak Hollow Utama</label>
                            <select id="jarakHollowUtama">
                                <option value="0.60">60 cm</option>
                                <option value="0.80" selected>80 cm</option>
                                <option value="1.00">100 cm</option>
                            </select>
                        </div>
                        <div>
                            <label>Jarak Hollow Cross</label>
                            <select id="jarakHollowCross">
                                <option value="0.40">40 cm</option>
                                <option value="0.60" selected>60 cm</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">üí° PENERANGAN</div>
                    <div class="input-row">
                        <div>
                            <label>Jumlah Downlight</label>
                            <input type="number" id="jumlahDownlight" placeholder="4" min="0" max="20" value="4">
                        </div>
                        <div>
                            <label>Watt Downlight</label>
                            <select id="wattDownlight">
                                <option value="9">9W</option>
                                <option value="12" selected>12W</option>
                                <option value="15">15W</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn-calculate" onclick="hitungProyek()">
                üßÆ HITUNG DETAIL PER BAGIAN
            </button>

            <div class="note-box">
                <strong>üìã KETERANGAN BAGIAN:</strong><br>
                ‚Ä¢ Filed = Area rata plafon<br>
                ‚Ä¢ Drop = Area yang turun<br>
                ‚Ä¢ Border = Pinggiran warna berbeda<br>
                ‚Ä¢ Lis dinding = Untuk sambungan ke dinding<br>
                ‚Ä¢ Lis siku = Untuk sudut drop<br>
                ‚Ä¢ Lis tutup = Untuk pinggiran drop
            </div>
        </div>

        <!-- PANEL KANAN: INFORMASI -->
        <div class="panel">
            <h2>‚ÑπÔ∏è INFORMASI MODEL</h2>

            <div class="section">
                <div class="section-title">üìù JENIS-JENIS PLAFON</div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 14px;">
                    <div style="margin-bottom: 10px;">
                        <strong>1. Flat 1 Warna:</strong><br>
                        ‚Ä¢ Seluruh plafon rata satu warna<br>
                        ‚Ä¢ Hanya butuh filed<br>
                        ‚Ä¢ Lis: dinding saja
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>2. Flat 2 Warna:</strong><br>
                        ‚Ä¢ Filed utama + border warna berbeda<br>
                        ‚Ä¢ Lis: dinding + transisi
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>3. Drop Pinggir:</strong><br>
                        ‚Ä¢ Pinggir ruangan turun<br>
                        ‚Ä¢ Lis: dinding + siku + tutup
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong>4. Drop Tengah:</strong><br>
                        ‚Ä¢ Tengah ruangan turun<br>
                        ‚Ä¢ Lis: dinding + siku + tutup
                    </div>
                    <div>
                        <strong>5. Drop Gabungan:</strong><br>
                        ‚Ä¢ Drop pinggir + filed + drop tengah<br>
                        ‚Ä¢ Lis: dinding + siku + tutup + transisi
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">üìä RUMUS PERHITUNGAN</div>
                <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; font-size: 13px;">
                    <div style="margin-bottom: 8px;">
                        <strong>Luas Filed:</strong><br>
                        Luas ruangan - luas drop - luas border
                    </div>
                    <div style="margin-bottom: 8px;">
                        <strong>Luas Drop Pinggir:</strong><br>
                        Keliling ruangan √ó lebar drop
                    </div>
                    <div style="margin-bottom: 8px;">
                        <strong>Luas Drop Tengah:</strong><br>
                        (Panjang - 2√ójarak) √ó (Lebar - 2√ójarak)
                    </div>
                    <div>
                        <strong>Panjang Lis:</strong><br>
                        ‚Ä¢ Dinding: keliling ruangan<br>
                        ‚Ä¢ Siku: keliling drop<br>
                        ‚Ä¢ Transisi: panjang border
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">üí∞ HARGA MATERIAL</div>
                <div style="background: #fff8e1; padding: 15px; border-radius: 8px; font-size: 13px;">
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 5px; margin-bottom: 5px;">
                        <div><strong>PVC Standard 4m:</strong></div>
                        <div>Rp 48.000</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 5px; margin-bottom: 5px;">
                        <div><strong>PVC SNI 4m:</strong></div>
                        <div>Rp 60.000</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 5px; margin-bottom: 5px;">
                        <div><strong>Lis Dinding:</strong></div>
                        <div>Rp 50.000/4m</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 5px; margin-bottom: 5px;">
                        <div><strong>Lis Siku:</strong></div>
                        <div>Rp 45.000/4m</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 5px;">
                        <div><strong>Lis Tutup:</strong></div>
                        <div>Rp 40.000/4m</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- HASIL KALKULASI -->
    <div id="resultsPanel" class="results-panel" style="display: none;">
        <h2>üìä HASIL PERHITUNGAN DETAIL</h2>

        <!-- CARD 1: RINCIAN BAGIAN -->
        <div class="material-card">
            <div class="material-header">
                <div class="material-title">üìê RINCIAN BAGIAN PLAFON</div>
                <div class="material-qty" id="totalLuas">0 m¬≤</div>
            </div>
            <div id="detailBagian"></div>
        </div>

        <!-- CARD 2: KEBUTUHAN PVC PER BAGIAN -->
        <div class="material-card">
            <div class="material-header">
                <div class="material-title">üß± KEBUTUHAN PVC PER BAGIAN</div>
                <div class="material-qty" id="totalPVC">0 LEMBAR</div>
            </div>
            <div id="detailPVC"></div>
        </div>

        <!-- CARD 3: KEBUTUHAN LIS -->
        <div class="material-card">
            <div class="material-header">
                <div class="material-title">üìè KEBUTUHAN LIS</div>
                <div class="material-qty" id="totalLis">0 BATANG</div>
            </div>
            <div id="detailLis"></div>
        </div>

        <!-- CARD 4: HOLLOW & AKSESORIS -->
        <div class="material-card">
            <div class="material-header">
                <div class="material-title">üîß HOLLOW & AKSESORIS</div>
                <div class="material-qty" id="totalHollow">0 BATANG</div>
            </div>
            <div id="detailHollow"></div>
        </div>

        <div class="cost-summary">
            <h3 style="margin-bottom: 15px;">üí∞ TOTAL BIAYA PROYEK</h3>
            <div id="costTotal" class="cost-total">Rp 0</div>
            <div style="margin-top: 20px;">
                <button class="btn-calculate" onclick="window.print()" style="background: linear-gradient(135deg, #6c757d, #495057); width: auto; padding: 12px 30px;">
                    üñ®Ô∏è CETAK RINCIAN
                </button>
                <button class="btn-calculate" onclick="resetCalculator()" style="background: linear-gradient(135deg, #e74c3c, #c0392b); width: auto; padding: 12px 30px; margin-left: 15px;">
                    üîÑ HITUNG LAGI
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========== HARGA MATERIAL ==========
        const harga = {
            pvcStandard: {
                '3': 36000,
                '4': 48000,
                '5': 60000
            },
            pvcSni: {
                '3': 45000,
                '4': 60000,
                '5': 75000
            },
            hollow: {
                standard: 13000,
                sni: 22000,
                '4x2': 11000,
                '4x4': 14000
            },
            lis: {
                dinding: 50000,    // per 4m
                transisi: 45000,   // per 4m
                siku: 45000,       // per 4m
                tutup: 40000       // per 4m
            },
            penerangan: {
                downlight9: 35000,
                downlight12: 45000,
                downlight15: 50000
            },
            aksesoris: {
                sekrupPvc: 30000,
                sekrupHollow: 30000,
                silikon: 45000
            },
            jasa: {
                flat1warna: 25000,
                flat2warna: 30000,
                dropPinggir: 35000,
                dropTengah: 45000,
                dropGabungan: 50000
            }
        };

        // ========== FUNGSI UTAMA ==========
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));

            document.getElementById('tab-' + tabName).classList.add('active');
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
            
            if (tabName === 'ukuran') {
                updateLuas();
            }
        }

        function updateModelSettings() {
            const model = document.querySelector('input[name="modelPlafon"]:checked').value;
            
            // Sembunyikan semua settings
            ['Flat2warna', 'DropPinggir', 'DropTengah', 'DropGabungan'].forEach(type => {
                document.getElementById('settings' + type).style.display = 'none';
            });
            
            // Tampilkan settings sesuai model
            if (model !== 'flat') {
                document.getElementById('settings' + model.charAt(0).toUpperCase() + model.slice(1)).style.display = 'block';
            }
        }

        function updateLuas() {
            const P = parseFloat(document.getElementById('panjang').value) || 4;
            const L = parseFloat(document.getElementById('lebar').value) || 3;
            const luas = P * L;
            
            document.getElementById('luasDisplay').textContent = luas.toFixed(2) + ' m¬≤';
        }

        // ========== PERHITUNGAN DETAIL PER BAGIAN ==========
        function hitungProyek() {
            const data = {
                // Ukuran
                P: parseFloat(document.getElementById('panjang').value) || 4,
                L: parseFloat(document.getElementById('lebar').value) || 3,
                
                // Model
                model: document.querySelector('input[name="modelPlafon"]:checked').value,
                
                // Settings masing-masing model
                lebarBorder: parseFloat(document.getElementById('lebarBorder').value) || 40,
                lebarDropPinggir: parseFloat(document.getElementById('lebarDropPinggir').value) || 40,
                tinggiDropPinggir: parseFloat(document.getElementById('tinggiDropPinggir').value) || 15,
                jarakDropTengah: parseFloat(document.getElementById('jarakDropTengah').value) || 50,
                lebarFiledDropTengah: parseFloat(document.getElementById('lebarFiledDropTengah').value) || 60,
                tinggiDropTengah: parseFloat(document.getElementById('tinggiDropTengah').value) || 20,
                lebarDropGabPinggir: parseFloat(document.getElementById('lebarDropGabPinggir').value) || 30,
                tinggiDropGabPinggir: parseFloat(document.getElementById('tinggiDropGabPinggir').value) || 10,
                lebarFiledGabungan: parseFloat(document.getElementById('lebarFiledGabungan').value) || 50,
                tinggiDropGabTengah: parseFloat(document.getElementById('tinggiDropGabTengah').value) || 20,
                
                // Material
                panjangPVC: parseFloat(document.getElementById('panjangPVC').value) || 4,
                lebarPVC: parseFloat(document.getElementById('lebarPVC').value) || 0.20,
                kualitasPVC: document.getElementById('kualitasPVC').value,
                
                // Rangka
                jarakHollowUtama: parseFloat(document.getElementById('jarakHollowUtama').value) || 0.8,
                jarakHollowCross: parseFloat(document.getElementById('jarakHollowCross').value) || 0.6,
                
                // Tambahan
                tambahHollow: parseInt(document.getElementById('tambahHollow').value) || 0,
                tipeHollowTambahan: document.getElementById('tipeHollowTambahan').value,
                
                // Penerangan
                jumlahDownlight: parseInt(document.getElementById('jumlahDownlight').value) || 4,
                wattDownlight: parseInt(document.getElementById('wattDownlight').value) || 12
            };

            // Hitung per bagian
            const hasil = hitungDetailPerBagian(data);

            // Tampilkan hasil
            tampilkanHasilDetail(data, hasil);

            // Scroll ke hasil
            document.getElementById('resultsPanel').style.display = 'block';
            document.getElementById('resultsPanel').scrollIntoView({ behavior: 'smooth' });
        }

        function hitungDetailPerBagian(data) {
            const P = data.P;
            const L = data.L;
            const luasTotal = P * L;
            const keliling = 2 * (P + L);
            
            let hasil = {
                bagian: {},
                pvc: {},
                lis: {},
                hollow: {},
                biaya: {}
            };
            
            // Hitung per bagian berdasarkan model
            if (data.model === 'flat') {
                // FLAT 1 WARNA
                hasil.bagian = {
                    filed: luasTotal
                };
                hasil.pvc = {
                    filed: hitungKebutuhanPVC(luasTotal, data.panjangPVC, data.lebarPVC, 1.1) // +10% waste
                };
                hasil.lis = {
                    dinding: Math.ceil(keliling / 4) // dalam batang @4m
                };
                
            } else if (data.model === 'flat2warna') {
                // FLAT 2 WARNA
                const lebarBorderM = data.lebarBorder / 100;
                const luasBorder = keliling * lebarBorderM;
                const luasFiled = luasTotal - luasBorder;
                
                hasil.bagian = {
                    filed: luasFiled,
                    border: luasBorder
                };
                hasil.pvc = {
                    filed: hitungKebutuhanPVC(luasFiled, data.panjangPVC, data.lebarPVC, 1.1),
                    border: hitungKebutuhanPVC(luasBorder, data.panjangPVC, data.lebarPVC, 1.2) // +20% waste untuk border
                };
                hasil.lis = {
                    dinding: Math.ceil(keliling / 4),
                    transisi: Math.ceil(keliling / 4)
                };
                
            } } else if (data.model === 'dropPinggir') {
    // DROP PINGGIR - PERHITUNGAN MATEMATIS YANG BENAR
    const lebarDropM = data.lebarDropPinggir / 100; // 40cm = 0.4m
    
    // ============================================
    // 1. UKURAN FIELD TENGAH YANG BENAR
    // ============================================
    const panjangFiled = Math.max(0.1, P - 2 * lebarDropM); // 4 - 0.8 = 3.2m
    const lebarFiled = Math.max(0.1, L - 2 * lebarDropM);   // 3 - 0.8 = 2.2m
    const luasFiled = panjangFiled * lebarFiled;            // 3.2 √ó 2.2 = 7.04 m¬≤
    
    // ============================================
    // 2. LUAS DROP YANG BENAR
    // ============================================
    const luasTotal = P * L;                                // 12 m¬≤
    const luasDrop = luasTotal - luasFiled;                 // 12 - 7.04 = 4.96 m¬≤
    
    // ============================================
    // 3. HITUNG PVC FIELD (cara tukang yang tepat)
    // ============================================
    // Lebar field 2.2m = 220cm, PVC lebar 20cm
    // Butuh: 220cm √∑ 20cm = 11 strip
    const pvcField = Math.ceil(lebarFiled / data.lebarPVC); // 2.2 √∑ 0.2 = 11 lembar
    
    // ============================================
    // 4. HITUNG PVC DROP (cara tukang yang tepat)
    // ============================================
    const keliling = 2 * (P + L);                           // 14 m
    
    // Cara 1: Berdasarkan luas
    const luasPerLembar = data.panjangPVC * data.lebarPVC;  // 4 √ó 0.2 = 0.8 m¬≤
    const pvcDropDariLuas = Math.ceil(luasDrop / luasPerLembar * 1.15); // 4.96 √∑ 0.8 √ó 1.15 = 7.13 ‚âà 8 lembar
    
    // Cara 2: Berdasarkan keliling (lebih akurat untuk drop)
    // Drop pinggir 40cm butuh 2 lapis PVC (karena PVC lebar 20cm)
    const batangPerLapis = Math.ceil(keliling / data.panjangPVC); // 14 √∑ 4 = 4 batang
    const lapisDibutuhkan = Math.ceil(lebarDropM / data.lebarPVC); // 0.4 √∑ 0.2 = 2 lapis
    const pvcDropDariKeliling = batangPerLapis * lapisDibutuhkan; // 4 √ó 2 = 8 lembar
    
    // Ambil nilai yang lebih kecil (realistis)
    const pvcDrop = Math.min(pvcDropDariLuas, pvcDropDariKeliling);
    
    // ============================================
    // 5. SIMPAN HASIL
    // ============================================
    const kelilingDropDalam = 2 * (panjangFiled + lebarFiled); // 10.8 m
    
    hasil.bagian = {
        filed: parseFloat(luasFiled.toFixed(2)),
        dropPinggir: parseFloat(luasDrop.toFixed(2)),
        ukuranFiled: `${(panjangFiled*100).toFixed(0)}cm √ó ${(lebarFiled*100).toFixed(0)}cm`,
        tinggiDrop: data.tinggiDropPinggir,
        lebarDrop: data.lebarDropPinggir,
        kelilingDrop: parseFloat(kelilingDropDalam.toFixed(2))
    };
    
    hasil.pvc = {
        filed: pvcField,
        dropPinggir: pvcDrop,
        total: pvcField + pvcDrop
    };
    
    // ============================================
    // 6. LIS
    // ============================================
    hasil.lis = {
        dinding: Math.ceil(keliling / 4),
        siku: Math.ceil(kelilingDropDalam / 4),
        tutup: Math.ceil(keliling / 4)
    };
    
    // ============================================
    // 7. LOG HASIL
    // ============================================
    console.log(`‚úÖ DROP PINGGIR ${P}m √ó ${L}m:`);
    console.log(`   Field: ${panjangFiled}m √ó ${lebarFiled}m = ${luasFiled}m¬≤`);
    console.log(`   PVC Field: ${lebarFiled}m √∑ ${data.lebarPVC}m = ${pvcField} lembar`);
    console.log(`   Drop: ${luasDrop}m¬≤`);
    console.log(`   PVC Drop: ${pvcDrop} lembar (${pvcDropDariLuas} dari luas, ${pvcDropDariKeliling} dari keliling)`);
    console.log(`   Total PVC: ${pvcField + pvcDrop} lembar`);
} else if (data.model === 'dropTengah') {
    // DROP TENGAH - PERBAIKAN
    const jarakM = data.jarakDropTengah / 100;          // jarak dari dinding (50cm = 0.5m)
    const lebarFiledM = data.lebarFiledDropTengah / 100; // lebar filed pinggir (60cm = 0.6m)
    
    // Hitung ukuran drop tengah
    const panjangDrop = Math.max(0.1, P - 2 * jarakM);
    const lebarDrop = Math.max(0.1, L - 2 * jarakM);
    const luasDrop = panjangDrop * lebarDrop;
    
    // Hitung luas filed (area pinggir antara drop dan dinding)
    const luasFiled = (P * L) - luasDrop;
    
    // Hitung keliling drop (untuk lis)
    const kelilingDrop = 2 * (panjangDrop + lebarDrop);
    
    hasil.bagian = {
        filed: parseFloat(luasFiled.toFixed(2)),
        dropTengah: parseFloat(luasDrop.toFixed(2)),
        tinggiDrop: data.tinggiDropTengah,
        jarakDinding: data.jarakDropTengah
    };
    
    // PVC
    hasil.pvc = {
        filed: hitungKebutuhanPVC(luasFiled, data.panjangPVC, data.lebarPVC, 1.1),
        dropTengah: hitungKebutuhanPVC(luasDrop, data.panjangPVC, data.lebarPVC, 1.15)
    };
    
    // Lis
    hasil.lis = {
        dinding: Math.ceil(2 * (P + L) / 4),
        siku: Math.ceil(kelilingDrop / 4),
        tutup: Math.ceil(kelilingDrop / 4)
    };
}
                
             } else if (data.model === 'dropGabungan') {
    // DROP GABUNGAN - PERBAIKAN
    const lebarDropPinggirM = data.lebarDropGabPinggir / 100;    // 30cm = 0.3m
    const lebarFiledM = data.lebarFiledGabungan / 100;           // 50cm = 0.5m
    
    // Luas total
    const luasTotal = P * L;
    
    // 1. DROP PINGGIR (luar)
    const kelilingLuar = 2 * (P + L);
    const luasDropPinggir = kelilingLuar * lebarDropPinggirM;
    
    // 2. AREA DALAM (setelah drop pinggir)
    const panjangDalam = Math.max(0.1, P - 2 * lebarDropPinggirM);
    const lebarDalam = Math.max(0.1, L - 2 * lebarDropPinggirM);
    const luasAreaDalam = panjangDalam * lebarDalam;
    
    // 3. DROP TENGAH
    const panjangDropTengah = Math.max(0.1, panjangDalam - 2 * lebarFiledM);
    const lebarDropTengah = Math.max(0.1, lebarDalam - 2 * lebarFiledM);
    const luasDropTengah = panjangDropTengah * lebarDropTengah;
    
    // 4. FILED (area antara drop pinggir dan drop tengah)
    const luasFiled = luasAreaDalam - luasDropTengah;
    
    // Keliling untuk lis
    const kelilingDropPinggirDalam = 2 * (panjangDalam + lebarDalam);
    const kelilingDropTengah = 2 * (panjangDropTengah + lebarDropTengah);
    
    hasil.bagian = {
        dropPinggir: parseFloat(luasDropPinggir.toFixed(2)),
        filed: parseFloat(luasFiled.toFixed(2)),
        dropTengah: parseFloat(luasDropTengah.toFixed(2)),
        tinggiDropPinggir: data.tinggiDropGabPinggir,
        tinggiDropTengah: data.tinggiDropGabTengah
    };
    
    // PVC
    hasil.pvc = {
        dropPinggir: hitungKebutuhanPVC(luasDropPinggir, data.panjangPVC, data.lebarPVC, 1.15),
        filed: hitungKebutuhanPVC(luasFiled, data.panjangPVC, data.lebarPVC, 1.1),
        dropTengah: hitungKebutuhanPVC(luasDropTengah, data.panjangPVC, data.lebarPVC, 1.15)
    };
    
    // Lis
    hasil.lis = {
        dinding: Math.ceil(kelilingLuar / 4),
        siku: Math.ceil((kelilingDropPinggirDalam + kelilingDropTengah) / 4),
        tutup: Math.ceil((kelilingDropPinggirDalam + kelilingDropTengah) / 4),
        transisi: Math.ceil(kelilingDropPinggirDalam / 4)
    };
}
            
            // Hitung total PVC
            hasil.pvc.totalLembar = Object.values(hasil.pvc).reduce((sum, val) => sum + (typeof val === 'number' ? val : 0), 0);
            
            // Hitung hollow rangka
            const jumlahHollowUtama = Math.ceil(L / data.jarakHollowUtama) + 1;
            const jumlahHollowCross = Math.ceil(P / data.jarakHollowCross) + 1;
            const batangHollowPinggir = Math.ceil(keliling / 4);
            const totalPanjangRangka = (jumlahHollowUtama * P) + (jumlahHollowCross * L) + (batangHollowPinggir * 4);
            hasil.hollow.rangka = Math.ceil(totalPanjangRangka / 4);
            
            // Hollow tambahan
            hasil.hollow.tambahan = data.tambahHollow;
            hasil.hollow.total = hasil.hollow.rangka + hasil.hollow.tambahan;
            
            // Hitung biaya
            hasil.biaya = hitungBiayaDetail(data, hasil);
            
            return hasil;
        }

        function hitungKebutuhanPVC(luas, panjangPVC, lebarPVC, faktorWaste) {
            const luasPerLembar = panjangPVC * lebarPVC;
            return Math.ceil((luas / luasPerLembar) * faktorWaste);
        }
function verifikasiSemuaModel(data) {
    const P = data.P;
    const L = data.L;
    const model = data.model;
    
    console.log("=== VERIFIKASI MODEL: " + model + " ===");
    console.log("Ukuran: " + P + "m x " + L + "m = " + (P*L).toFixed(2) + "m¬≤");
    
    let hasil = hitungDetailPerBagian(data);
    
    console.log("Hasil perhitungan:");
    console.log("- Filed: " + (hasil.bagian.filed || 0).toFixed(2) + " m¬≤");
    console.log("- Drop: " + ((hasil.bagian.dropPinggir || 0) + (hasil.bagian.dropTengah || 0)).toFixed(2) + " m¬≤");
    
    const totalBagian = Object.values(hasil.bagian)
        .filter(val => typeof val === 'number')
        .reduce((sum, val) => sum + val, 0);
    
    console.log("- Total bagian: " + totalBagian.toFixed(2) + " m¬≤");
    console.log("- Selisih dengan luas ruangan: " + Math.abs((P*L) - totalBagian).toFixed(2) + " m¬≤");
    
    return hasil;
}
        

        function hitungBiayaDetail(data, hasil) {
            // Harga PVC
            const hargaPVC = data.kualitasPVC === 'sni' ? harga.pvcSni : harga.pvcStandard;
            const hargaPerLembarPVC = hargaPVC[data.panjangPVC.toString()] || hargaPVC['4'];
            const biayaPVC = hasil.pvc.totalLembar * hargaPerLembarPVC;
            
            // Harga Lis
            let biayaLis = 0;
            if (hasil.lis.dinding) biayaLis += hasil.lis.dinding * harga.lis.dinding;
            if (hasil.lis.transisi) biayaLis += hasil.lis.transisi * harga.lis.transisi;
            if (hasil.lis.siku) biayaLis += hasil.lis.siku * harga.lis.siku;
            if (hasil.lis.tutup) biayaLis += hasil.lis.tutup * harga.lis.tutup;
            
            // Harga Hollow
            const hargaPerBatangHollow = harga.hollow.standard; // untuk rangka
            const biayaHollowRangka = hasil.hollow.rangka * hargaPerBatangHollow;
            
            // Harga Hollow Tambahan
            const hargaHollowTambahan = harga.hollow[data.tipeHollowTambahan] || harga.hollow['4x4'];
            const biayaHollowTambahan = hasil.hollow.tambahan * hargaHollowTambahan;
            
            // Harga Downlight
            const hargaDownlight = harga.penerangan[`downlight${data.wattDownlight}`] || harga.penerangan.downlight12;
            const biayaDownlight = data.jumlahDownlight * hargaDownlight;
            
            // Harga Aksesoris
            const kebutuhanSekrupPVC = Math.ceil(hasil.pvc.totalLembar * 10); // 10 sekrup per lembar
            const kebutuhanSekrupHollow = Math.ceil(hasil.hollow.rangka * 20); // 20 sekrup per batang
            const biayaSekrupPVC = Math.ceil(kebutuhanSekrupPVC / 100) * harga.aksesoris.sekrupPvc;
            const biayaSekrupHollow = Math.ceil(kebutuhanSekrupHollow / 100) * harga.aksesoris.sekrupHollow;
            const biayaSilikon = Math.ceil(hasil.pvc.totalLembar * 0.3) * harga.aksesoris.silikon; // 0.3 tube per lembar
            
            // Harga Jasa
            const hargaJasaPerM2 = harga.jasa[data.model] || harga.jasa.flat1warna;
            const biayaJasa = (data.P * data.L) * hargaJasaPerM2;
            
            // Total
            const totalMaterial = biayaPVC + biayaLis + biayaHollowRangka + biayaHollowTambahan + 
                                biayaDownlight + biayaSekrupPVC + biayaSekrupHollow + biayaSilikon;
            const totalBiaya = totalMaterial + biayaJasa;
            const totalPPN = totalBiaya * 0.11;
            const totalAll = Math.round(totalBiaya + totalPPN);
            
            return {
                pvc: biayaPVC,
                lis: biayaLis,
                hollowRangka: biayaHollowRangka,
                hollowTambahan: biayaHollowTambahan,
                downlight: biayaDownlight,
                aksesoris: biayaSekrupPVC + biayaSekrupHollow + biayaSilikon,
                material: totalMaterial,
                jasa: biayaJasa,
                ppn: totalPPN,
                total: totalAll
            };
        }

        function tampilkanHasilDetail(data, hasil) {
            // Update totals
            document.getElementById('totalLuas').textContent = (data.P * data.L).toFixed(2) + ' m¬≤';
            document.getElementById('totalPVC').textContent = hasil.pvc.totalLembar + ' LEMBAR';
            document.getElementById('totalLis').textContent = Object.values(hasil.lis).reduce((a, b) => a + b, 0) + ' BATANG';
            document.getElementById('totalHollow').textContent = hasil.hollow.total + ' BATANG';

            // ========== RINCIAN BAGIAN ==========
            let htmlBagian = '<div class="bagian-detail">';
            
            if (data.model === 'flat') {
                htmlBagian += `
                    <div class="bagian-title">üì¶ Flat 1 Warna</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Filed:</strong> ${hasil.bagian.filed.toFixed(2)} m¬≤</div>
                        <div><strong>Lis:</strong> Dinding saja</div>
                    </div>
                `;
            } else if (data.model === 'flat2warna') {
                htmlBagian += `
                    <div class="bagian-title">üé® Flat 2 Warna</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div><strong>Filed Utama:</strong> ${hasil.bagian.filed.toFixed(2)} m¬≤</div>
                        <div><strong>Border:</strong> ${data.lebarBorder} cm</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Luas Border:</strong> ${hasil.bagian.border.toFixed(2)} m¬≤</div>
                        <div><strong>Lis:</strong> Dinding + Transisi</div>
                    </div>
                `;
            } else if (data.model === 'dropPinggir') {
                htmlBagian += `
                    <div class="bagian-title">üìê Drop Pinggir</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div><strong>Filed:</strong> ${hasil.bagian.filed.toFixed(2)} m¬≤</div>
                        <div><strong>Drop Pinggir:</strong> ${data.lebarDropPinggir} cm</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Tinggi Turun:</strong> ${data.tinggiDropPinggir} cm</div>
                        <div><strong>Lis:</strong> Dinding + Siku + Tutup</div>
                    </div>
                `;
            } else if (data.model === 'dropTengah') {
                htmlBagian += `
                    <div class="bagian-title">üéØ Drop Tengah</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div><strong>Filed Pinggir:</strong> ${hasil.bagian.filed.toFixed(2)} m¬≤</div>
                        <div><strong>Lebar Filed:</strong> ${data.lebarFiledDropTengah} cm</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div><strong>Drop Tengah:</strong> ${hasil.bagian.dropTengah.toFixed(2)} m¬≤</div>
                        <div><strong>Tinggi Turun:</strong> ${data.tinggiDropTengah} cm</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Jarak dari Dinding:</strong> ${data.jarakDropTengah} cm</div>
                        <div><strong>Lis:</strong> Dinding + Siku + Tutup</div>
                    </div>
                `;
            } else if (data.model === 'dropGabungan') {
                htmlBagian += `
                    <div class="bagian-title">‚ú® Drop Gabungan</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div><strong>Drop Pinggir:</strong> ${hasil.bagian.dropPinggir.toFixed(2)} m¬≤</div>
                        <div><strong>Tinggi:</strong> ${data.tinggiDropGabPinggir} cm</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div><strong>Filed:</strong> ${hasil.bagian.filed.toFixed(2)} m¬≤</div>
                        <div><strong>Lebar Filed:</strong> ${data.lebarFiledGabungan} cm</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div><strong>Drop Tengah:</strong> ${hasil.bagian.dropTengah.toFixed(2)} m¬≤</div>
                        <div><strong>Tinggi:</strong> ${data.tinggiDropGabTengah} cm</div>
                    </div>
                `;
            }
            
            htmlBagian += '</div>';
            document.getElementById('detailBagian').innerHTML = htmlBagian;

            // ========== DETAIL PVC PER BAGIAN ==========
            let htmlPVC = '';
            Object.entries(hasil.pvc).forEach(([key, value]) => {
                if (key !== 'totalLembar' && typeof value === 'number' && value > 0) {
                    const bagianName = getNamaBagian(key);
                    htmlPVC += `
                        <div class="detail-item">
                            <div class="detail-label">${bagianName}</div>
                            <div class="detail-value">${value} lembar</div>
                        </div>
                    `;
                }
            });
            
            htmlPVC += `
                <div class="detail-item" style="grid-column: span 2; background: #f8f9fa;">
                    <div class="detail-label"><strong>TOTAL SEMUA PVC</strong></div>
                    <div class="detail-value" style="color: var(--danger); font-size: 18px;">${hasil.pvc.totalLembar} lembar</div>
                </div>
            `;
            
            document.getElementById('detailPVC').innerHTML = `
                <div class="material-details">
                    ${htmlPVC}
                </div>
            `;

            // ========== DETAIL LIS ==========
            let htmlLis = '';
            Object.entries(hasil.lis).forEach(([key, value]) => {
                if (value > 0) {
                    const lisName = getNamaLis(key);
                    htmlLis += `
                        <div class="detail-item">
                            <div class="detail-label">${lisName}</div>
                            <div class="detail-value">${value} batang</div>
                        </div>
                    `;
                }
            });
            
            const totalLis = Object.values(hasil.lis).reduce((a, b) => a + b, 0);
            htmlLis += `
                <div class="detail-item" style="grid-column: span 2; background: #f8f9fa;">
                    <div class="detail-label"><strong>TOTAL SEMUA LIS</strong></div>
                    <div class="detail-value" style="color: var(--danger); font-size: 18px;">${totalLis} batang</div>
                </div>
            `;
            
            document.getElementById('detailLis').innerHTML = `
                <div class="material-details">
                    ${htmlLis}
                </div>
            `;

            // ========== DETAIL HOLLOW ==========
            let htmlHollow = `
                <div class="material-details">
                    <div class="detail-item">
                        <div class="detail-label">Hollow Rangka</div>
                        <div class="detail-value">${hasil.hollow.rangka} batang</div>
                    </div>
            `;
            
            if (hasil.hollow.tambahan > 0) {
                htmlHollow += `
                    <div class="detail-item">
                        <div class="detail-label">Hollow Tambahan (${data.tipeHollowTambahan})</div>
                        <div class="detail-value">${hasil.hollow.tambahan} batang</div>
                    </div>
                `;
            }
            
            htmlHollow += `
                    <div class="detail-item" style="grid-column: span 2; background: #f8f9fa;">
                        <div class="detail-label"><strong>TOTAL HOLLOW</strong></div>
                        <div class="detail-value" style="color: var(--danger); font-size: 18px;">${hasil.hollow.total} batang</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Downlight ${data.wattDownlight}W</div>
                        <div class="detail-value">${data.jumlahDownlight} buah</div>
                    </div>
                </div>
            `;
            
            document.getElementById('detailHollow').innerHTML = htmlHollow;

            // ========== TOTAL BIAYA ==========
            let costHTML = `
                <div style="text-align: left; max-width: 600px; margin: 0 auto;">
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 5px;">
                        <div>Biaya PVC:</div>
                        <div>${formatRupiah(hasil.biaya.pvc)}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 5px;">
                        <div>Biaya Lis:</div>
                        <div>${formatRupiah(hasil.biaya.lis)}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 5px;">
                        <div>Biaya Hollow:</div>
                        <div>${formatRupiah(hasil.biaya.hollowRangka + hasil.biaya.hollowTambahan)}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 5px; border-top: 1px solid rgba(255,255,255,0.3); padding-top: 10px;">
                        <div><strong>Total Material:</strong></div>
                        <div><strong>${formatRupiah(hasil.biaya.material)}</strong></div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 5px;">
                        <div>Biaya Jasa:</div>
                        <div>${formatRupiah(hasil.biaya.jasa)}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-bottom: 5px;">
                        <div>PPN 11%:</div>
                        <div>${formatRupiah(hasil.biaya.ppn)}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 10px; margin-top: 10px; padding-top: 10px; border-top: 2px solid rgba(255,255,255,0.5); font-size: 20px;">
                        <div><strong>TOTAL BIAYA:</strong></div>
                        <div><strong>${formatRupiah(hasil.biaya.total)}</strong></div>
                    </div>
                </div>
            `;
            
            document.getElementById('costTotal').innerHTML = costHTML;
        }

        function getNamaBagian(key) {
            const names = {
                'filed': 'Filed Utama',
                'border': 'Border',
                'dropPinggir': 'Drop Pinggir',
                'dropTengah': 'Drop Tengah'
            };
            return names[key] || key;
        }

        function getNamaLis(key) {
            const names = {
                'dinding': 'Lis Dinding',
                'transisi': 'Lis Transisi',
                'siku': 'Lis Siku',
                'tutup': 'Lis Tutup'
            };
            return names[key] || key;
        }

        function formatRupiah(angka) {
            return 'Rp ' + Math.round(angka).toLocaleString('id-ID');
        }

        function resetCalculator() {
            // Reset input
            document.getElementById('panjang').value = 4;
            document.getElementById('lebar').value = 3;
            document.getElementById('tambahHollow').value = 0;
            document.getElementById('jumlahDownlight').value = 4;
            
            // Reset ke tab pertama
            switchTab('ukuran');
            
            // Reset hasil
            document.getElementById('resultsPanel').style.display = 'none';
            
            // Update
            updateLuas();
            
            // Scroll ke atas
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ========== INITIALIZE ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Event listeners
            document.getElementById('panjang').addEventListener('input', updateLuas);
            document.getElementById('lebar').addEventListener('input', updateLuas);
            
            document.querySelectorAll('input[name="modelPlafon"]').forEach(radio => {
                radio.addEventListener('change', updateModelSettings);
            });
            
            // Initial setup
            updateLuas();
            updateModelSettings();
        });

         const PASSWORDS = ["tukang2025"];
        let attempts = 0;
        const maxAttempts = 3;

        function checkPassword() {
            const input = prompt("üîê MASUKKAN KODE AKSES");

            if (PASSWORDS.includes(input)) {
                return true; // Password benar
            } else {
                attempts++;
                if (attempts < maxAttempts) {
                    alert(`Kode salah! Percobaan ${attempts}/${maxAttempts}`);
                    return checkPassword(); // Coba lagi
                } else {
                    alert("Akses ditolak! Hubungi admin.");
                    return false;
                }
            }
        }

        if (!checkPassword()) {
            document.body.innerHTML = `
        <div style="text-align:center; padding:50px; font-family:Arial;">
            <h1>‚õî AKSES DITOLAK</h1>
            <p>Anda tidak memiliki akses ke halaman ini.</p>
            <p><small>Hubungi administrator untuk mendapatkan kode akses.</small></p>
        </div>
    `;
        }
    </script>
</body>
</html>


