<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Kalkulator Plafon PVC & Penerangan Lengkap</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 16px;
        }
        
        h2 {
            color: #3498db;
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
            font-size: 20px;
        }
        
        h3 {
            color: #2c3e50;
            margin: 20px 0 10px 0;
            font-size: 18px;
        }
        
        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        
        label {
            display: block;
            margin: 12px 0 5px 0;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dcdfe6;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        
        .radio-group label {
            background: white;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: normal;
            margin: 5px 0;
        }
        
        .radio-group label:hover {
            border-color: #3498db;
            background: #f0f8ff;
        }
        
        .radio-group input[type="radio"]:checked + label {
            border-color: #3498db;
            background: #e1f0fa;
            font-weight: 600;
        }
        
        .radio-group input[type="radio"] {
            display: none;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
        
        .checkbox-group label {
            background: white;
            padding: 12px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: normal;
            margin: 5px 0;
        }
        
        .checkbox-group label:hover {
            border-color: #27ae60;
            background: #f0fff4;
        }
        
        .checkbox-group input[type="checkbox"]:checked + label {
            border-color: #27ae60;
            background: #e8f8ef;
            font-weight: 600;
        }
        
        .checkbox-group input[type="checkbox"] {
            display: none;
        }
        
        .input-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 10px 0;
        }
        
        .color-preview {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 8px;
            vertical-align: middle;
            border: 1px solid #ddd;
        }
        
        button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px 0;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .result-section {
            background: #e8f4fc;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }
        
        .material-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #27ae60;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .total-cost {
            background: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .visualization {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px dashed #bdc3c7;
        }
        
        #visualCanvas {
            min-height: 400px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
        }
        
        .posisi-detail {
            background: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .input-group {
                grid-template-columns: 1fr;
            }
            
            .radio-group, .checkbox-group {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üßÆ KALKULATOR PLAFON PVC & PENERANGAN LENGKAP</h1>
        <p class="subtitle">Hitung semua kebutuhan material plafon PVC, lampu, dan instalasi listrik</p>
        
        <!-- SECTION 1: UKURAN RUANGAN -->
        <div class="section">
            <h2>üìè UKURAN RUANGAN</h2>
            <div class="input-group">
                <div>
                    <label>Panjang Ruangan (meter)</label>
                    <input type="number" id="panjang" placeholder="4.0" step="0.1" min="1" value="4.0">
                </div>
                <div>
                    <label>Lebar Ruangan (meter)</label>
                    <input type="number" id="lebar" placeholder="3.0" step="0.1" min="1" value="3.0">
                </div>
            </div>
            <div class="input-group">
                <div>
                    <label>Tinggi Ruangan (meter)</label>
                    <input type="number" id="tinggi" placeholder="3.0" step="0.1" min="2" value="3.0">
                </div>
                <div>
                    <label>Jenis Ruangan</label>
                    <select id="jenisRuangan">
                        <option value="kamar">Kamar Tidur</option>
                        <option value="ruangtamu">Ruang Tamu</option>
                        <option value="dapur">Dapur</option>
                        <option value="kamarMandi">Kamar Mandi</option>
                        <option value="kantor">Kantor</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- SECTION 2: DESIGN PLAFON -->
        <div class="section">
            <h2>üé® DESIGN PLAFON</h2>
            
            <label>Model Plafon:</label>
            <div class="radio-group">
                <input type="radio" name="modelPlafon" id="flat" value="flat" checked>
                <label for="flat">üè† Flat Standard</label>
                
                <input type="radio" name="modelPlafon" id="drop1" value="drop1">
                <label for="drop1">‚¨áÔ∏è Drop Single Level</label>
                
                <input type="radio" name="modelPlafon" id="drop2" value="drop2">
                <label for="drop2">üîΩ Drop Multi Level</label>
            </div>

            <label>Warna Plafon:</label>
            <div class="radio-group">
                <input type="radio" name="warnaPlafon" id="satuWarna" value="satu" checked>
                <label for="satuWarna">üé® Satu Warna</label>
                
                <input type="radio" name="warnaPlafon" id="duaWarna" value="dua">
                <label for="duaWarna">üåà Dua Warna (Border + Field)</label>
            </div>

            <div id="borderOptions" style="display: none;">
                <div class="input-group">
                    <div>
                        <label>Lebar Border (cm)</label>
                        <input type="number" id="lebarBorder" placeholder="30" value="30" min="10" max="100">
                    </div>
                    <div>
                        <label>Warna Border</label>
                        <select id="warnaBorder">
                            <option value="hitam">Hitam</option>
                            <option value="coklat">Coklat</option>
                            <option value="abu">Abu-abu</option>
                            <option value="navy">Navy Blue</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <div>
                    <label>Panjang PVC per Lembar</label>
                    <select id="panjangPVC">
                        <option value="4">4 meter</option>
                        <option value="5">5 meter</option>
                        <option value="6">6 meter</option>
                    </select>
                </div>
                <div>
                    <label>Lebar PVC</label>
                    <select id="lebarPVC">
                        <option value="0.20">20 cm</option>
                        <option value="0.25">25 cm</option>
                        <option value="0.30">30 cm</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- SECTION 3: SISTEM PENERANGAN -->
        <div class="section">
            <h2>üí° SISTEM PENERANGAN</h2>
            
            <label>Jenis Penerangan:</label>
            <div class="checkbox-group">
                <input type="checkbox" id="downlight" checked>
                <label for="downlight">üí° Downlight LED</label>
                
                <input type="checkbox" id="ledStrip">
                <label for="ledStrip">‚ú® LED Strip Dekorasi</label>
                
                <input type="checkbox" id="lampuGantung">
                <label for="lampuGantung">ü™î Lampu Gantung</label>
            </div>

            <div id="downlightOptions">
                <div class="input-group">
                    <div>
                        <label>Jumlah Downlight</label>
                        <input type="number" id="jumlahDownlight" placeholder="4" min="1" max="20" value="4">
                    </div>
                    <div>
                        <label>Watt per Downlight</label>
                        <select id="wattDownlight">
                            <option value="9">9W</option>
                            <option value="12" selected>12W</option>
                            <option value="15">15W</option>
                            <option value="18">18W</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="ledStripOptions" style="display: none;">
                <div class="input-group">
                    <div>
                        <label>Panjang LED Strip (meter)</label>
                        <input type="number" id="panjangLED" placeholder="14" min="1" value="14">
                    </div>
                    <div>
                        <label>Tipe LED Strip</label>
                        <select id="tipeLED">
                            <option value="2835">2835 White</option>
                            <option value="5050">5050 RGB</option>
                            <option value="rgbw">RGB + White</option>
                        </select>
                    </div>
                </div>
                <label>Posisi LED Strip:</label>
                <div class="radio-group">
                    <input type="radio" name="posisiLED" id="lisTengah" value="lisTengah" checked>
                    <label for="lisTengah">üìè Lis Tengah (Plafon-Dinding)</label>
                    
                    <input type="radio" name="posisiLED" id="cove" value="cove">
                    <label for="cove">üèóÔ∏è Cove Lighting</label>
                </div>
            </div>

            <div class="input-group">
                <div>
                    <label>Jumlah Stop Kontak</label>
                    <input type="number" id="stopKontak" placeholder="3" min="0" max="10" value="3">
                </div>
                <div>
                    <label>Jumlah Saklar</label>
                    <input type="number" id="saklar" placeholder="2" min="0" max="10" value="2">
                </div>
            </div>
        </div>

        <!-- SECTION 4: MATERIAL RANGKA -->
        <div class="section">
            <h2>üî© MATERIAL RANGKA & AKSESORIS</h2>
            
            <label>Paket Rangka Hollow:</label>
            <div class="radio-group">
                <input type="radio" name="paketRangka" id="standar" value="standar" checked>
                <label for="standar">‚≠ê Standar (60√ó80cm)</label>
                
                <input type="radio" name="paketRangka" id="ekonomis" value="ekonomis">
                <label for="ekonomis">üí∞ Ekonomis</label>
                
                <input type="radio" name="paketRangka" id="premium" value="premium">
                <label for="premium">üíé Premium (Rapat)</label>
            </div>

            <label>Aksesoris Tambahan:</label>
            <div class="checkbox-group">
                <input type="checkbox" id="silikon" checked>
                <label for="silikon">üé® Silikon & Sealant</label>
                
                <input type="checkbox" id="hanger" checked>
                <label for="hanger">üìé Hanger & Kawat</label>
                
                <input type="checkbox" id="furing">
                <label for="furing">üìê Furing Kayu</label>
            </div>
        </div>

        <button onclick="hitungSemua()">üßÆ HITUNG SEMUA KEBUTUHAN</button>

        <!-- HASIL KALKULASI -->
        <div id="hasil" class="result-section" style="display: none;">
            <h2>üìã HASIL PERHITUNGAN LENGKAP</h2>
            
            <div class="material-item">
                <h3>üìè INFO RUANGAN</h3>
                <div id="infoRuangan"></div>
            </div>

            <div class="material-item">
                <h3>üß± MATERIAL PLAFON PVC</h3>
                <div id="materialPlafon"></div>
            </div>

            <div class="material-item">
                <h3>üí° SISTEM PENERANGAN</h3>
                <div id="materialPenerangan"></div>
                <div id="posisiLampu"></div>
            </div>

            <div class="material-item">
                <h3>üî© RANGKA & AKSESORIS</h3>
                <div id="materialRangka"></div>
            </div>

            <div class="material-item">
                <h3>üîå INSTALASI LISTRIK</h3>
                <div id="materialListrik"></div>
            </div>

            <div class="total-cost">
                <div id="totalBiaya"></div>
            </div>

            <div class="warning">
                <strong>‚ö†Ô∏è CATATAN TEKNIS:</strong><br>
                Perhitungan sudah termasuk waste material 10-15% dan cadangan. Harga material dapat bervariasi tergantung merk dan lokasi. Disarankan survey lapangan untuk akurasi maksimal.
            </div>
        </div>

        <div class="visualization">
            <h3>üìä VISUALISASI DESAIN</h3>
            <p>Visualisasi akan ditampilkan di sini setelah menghitung</p>
            <div id="visualCanvas"></div>
        </div>
    </div>

    <script>
        // Toggle options berdasarkan pilihan
        document.getElementById('duaWarna').addEventListener('change', function() {
            document.getElementById('borderOptions').style.display = this.checked ? 'block' : 'none';
        });

        document.getElementById('downlight').addEventListener('change', function() {
            document.getElementById('downlightOptions').style.display = this.checked ? 'block' : 'none';
        });

        document.getElementById('ledStrip').addEventListener('change', function() {
            document.getElementById('ledStripOptions').style.display = this.checked ? 'block' : 'none';
        });

        // Harga material (bisa disesuaikan)
        const HARGA = {
            pvc: 50000, // per lembar 4m
            hollow: 30000, // per batang 4m
            lis: 10000, // per batang 4m
            downlight: 80000, // per titik termasuk fitting
            ledStrip: 30000, // per meter termasuk profile
            driverLED: 150000,
            kabelNym15: 15000, // per meter
            kabelNym25: 20000, // per meter
            pipaConduit: 12000, // per meter
            saklar: 25000,
            stopKontak: 30000,
            sekrup: 500, // per biji
            silikon: 35000, // per tube
            hanger: 2000, // per biji
            jasaPasang: 75000 // per m¬≤
        };

        function hitungSemua() {
            // Ambil semua nilai input
            const panjang = parseFloat(document.getElementById('panjang').value);
            const lebar = parseFloat(document.getElementById('lebar').value);
            const tinggi = parseFloat(document.getElementById('tinggi').value);
            const jenisRuangan = document.getElementById('jenisRuangan').value;
            
            const modelPlafon = document.querySelector('input[name="modelPlafon"]:checked').value;
            const warnaPlafon = document.querySelector('input[name="warnaPlafon"]:checked').value;
            const lebarBorder = parseFloat(document.getElementById('lebarBorder').value) / 100; // convert to meter
            const panjangPVC = parseFloat(document.getElementById('panjangPVC').value);
            const lebarPVC = parseFloat(document.getElementById('lebarPVC').value);
            
            const paketRangka = document.querySelector('input[name="paketRangka"]:checked').value;
            
            const downlight = document.getElementById('downlight').checked;
            const ledStrip = document.getElementById('ledStrip').checked;
            const lampuGantung = document.getElementById('lampuGantung').checked;
            const jumlahDownlight = parseInt(document.getElementById('jumlahDownlight').value);
            const wattDownlight = parseInt(document.getElementById('wattDownlight').value);
            const panjangLED = parseInt(document.getElementById('panjangLED').value);
            const tipeLED = document.getElementById('tipeLED').value;
            const posisiLED = document.querySelector('input[name="posisiLED"]:checked').value;
            const stopKontak = parseInt(document.getElementById('stopKontak').value);
            const saklar = parseInt(document.getElementById('saklar').value);
            
            const silikon = document.getElementById('silikon').checked;
            const hanger = document.getElementById('hanger').checked;
            const furing = document.getElementById('furing').checked;

            // Hitung luas dan keliling
            const luas = panjang * lebar;
            const keliling = 2 * (panjang + lebar);

            // HASIL KALKULASI
            let hasilHTML = '';

            // 1. INFO RUANGAN
            hasilHTML += `<p><strong>Luas Ruangan:</strong> ${luas.toFixed(2)} m¬≤</p>`;
            hasilHTML += `<p><strong>Keliling:</strong> ${keliling.toFixed(2)} meter</p>`;
            hasilHTML += `<p><strong>Jenis:</strong> ${document.getElementById('jenisRuangan').options[document.getElementById('jenisRuangan').selectedIndex].text}</p>`;
            document.getElementById('infoRuangan').innerHTML = hasilHTML;

            // 2. MATERIAL PLAFON
            let materialPlafon = '';
            const nPvc = Math.ceil(luas / (panjangPVC * lebarPVC)) * 1.1; // +10% waste
            const nHollow = Math.ceil((keliling + luas * 0.3) / 4) * 1.1; // Estimasi hollow
            const nLis = Math.ceil(keliling / 4) * 1.1; // Lis 4m per batang

            materialPlafon += `<p><strong>PVC ${panjangPVC}m √ó ${(lebarPVC * 100)}cm:</strong> ${Math.ceil(nPvc)} lembar</p>`;
            materialPlafon += `<p><strong>Hollow 4m:</strong> ${Math.ceil(nHollow)} batang</p>`;
            materialPlafon += `<p><strong>Lis PVC 4m:</strong> ${Math.ceil(nLis)} batang</p>`;
            
            if (warnaPlafon === 'dua') {
                materialPlafon += `<p><strong>Warna Border:</strong> ${document.getElementById('warnaBorder').value} (${lebarBorder * 100}cm)</p>`;
            }
            
            document.getElementById('materialPlafon').innerHTML = materialPlafon;

            // 3. SISTEM PENERANGAN
            let materialPenerangan = '';
            let posisiLampuHTML = '';
            
            if (downlight) {
                materialPenerangan += `<p><strong>Downlight LED ${wattDownlight}W:</strong> ${jumlahDownlight} titik</p>`;
                materialPenerangan += `<p><strong>Total Daya:</strong> ${jumlahDownlight * wattDownlight} Watt</p>`;
                
                // HITUNG POSISI DETAIL UNTUK TUKANG
                const posisi = hitungPosisiDownlight(panjang, lebar, jumlahDownlight);
                posisiLampuHTML = `<div class="posisi-detail">
                    <strong>üìç POSISI DOWNLIGHT (dari dinding):</strong><br>
                    ${posisi.map((p, i) => `L${i+1}: (${p.x.toFixed(2)}m, ${p.y.toFixed(2)}m)`).join('<br>')}
                    <br><strong>Jarak dari dinding samping:</strong> ${posisi[0].jarakSamping.toFixed(2)}m
                    <br><strong>Jarak dari dinding depan/belakang:</strong> ${posisi[0].jarakDepan.toFixed(2)}m
                    <br><strong>Jarak antar downlight:</strong> ${posisi[0].jarakAntar.toFixed(2)}m
                </div>`;
            }
            
            if (ledStrip) {
                materialPenerangan += `<p><strong>LED Strip ${tipeLED}:</strong> ${panjangLED} meter</p>`;
                materialPenerangan += `<p><strong>Posisi:</strong> ${posisiLED === 'lisTengah' ? 'Lis Tengah' : 'Cove Lighting'}</p>`;
                materialPenerangan += `<p><strong>Driver LED:</strong> ${Math.ceil(panjangLED / 5)} buah</p>`;
            }
            
            if (lampuGantung) {
                materialPenerangan += `<p><strong>Lampu Gantung:</strong> 1 titik (tengah ruangan)</p>`;
                posisiLampuHTML += `<div class="posisi-detail">
                    <strong>üìç POSISI LAMPU GANTUNG:</strong><br>
                    Tengah ruangan: (${(panjang/2).toFixed(2)}m, ${(lebar/2).toFixed(2)}m)
                </div>`;
            }
            
            document.getElementById('materialPenerangan').innerHTML = materialPenerangan;
            document.getElementById('posisiLampu').innerHTML = posisiLampuHTML;

            // 4. RANGKA & AKSESORIS
            let materialRangka = '';
            materialRangka += `<p><strong>Paket Rangka:</strong> ${document.querySelector('input[name="paketRangka"]:checked').parentNode.textContent}</p>`;
            materialRangka += `<p><strong>Sekrup:</strong> ¬± ${Math.ceil(luas * 8)} biji</p>`;
            
            if (silikon) materialRangka += `<p><strong>Silikon:</strong> ${Math.ceil(keliling / 8)} tube</p>`;
            if (hanger) materialRangka += `<p><strong>Hanger:</strong> ${Math.ceil(luas * 0.8)} biji</p>`;
            if (furing) materialRangka += `<p><strong>Furing Kayu:</strong> ${Math.ceil(keliling / 4)} batang</p>`;
            
            document.getElementById('materialRangka').innerHTML = materialRangka;

            // 5. INSTALASI LISTRIK
            let materialListrik = '';
            if (downlight || ledStrip || lampuGantung) {
                materialListrik += `<p><strong>Kabel NYM 2√ó1.5:</strong> ${Math.ceil(keliling * 1.5)} meter</p>`;
                materialListrik += `<p><strong>Pipa Conduit:</strong> ${Math.ceil(keliling * 1.2)} meter</p>`;
            }
            
            materialListrik += `<p><strong>Stop Kontak:</strong> ${stopKontak} buah</p>`;
            materialListrik += `<p><strong>Saklar:</strong> ${saklar} buah</p>`;
            
            document.getElementById('materialListrik').innerHTML = materialListrik;

            // 6. TOTAL BIAYA
            let totalBiaya = 0;
            totalBiaya += Math.ceil(nPvc) * HARGA.pvc;
            totalBiaya += Math.ceil(nHollow) * HARGA.hollow;
            totalBiaya += Math.ceil(nLis) * HARGA.lis;
            
            if (downlight) totalBiaya += jumlahDownlight * HARGA.downlight;
            if (ledStrip) totalBiaya += panjangLED * HARGA.ledStrip + Math.ceil(panjangLED / 5) * HARGA.driverLED;
            if (lampuGantung) totalBiaya += 150000; // estimasi lampu gantung
            
            totalBiaya += stopKontak * HARGA.stopKontak;
            totalBiaya += saklar * HARGA.saklar;
            totalBiaya += Math.ceil(keliling * 1.5) * HARGA.kabelNym15;
            totalBiaya += Math.ceil(keliling * 1.2) * HARGA.pipaConduit;
            totalBiaya += Math.ceil(luas * 8) * HARGA.sekrup;
            
            if (silikon) totalBiaya += Math.ceil(keliling / 8) * HARGA.silikon;
            if (hanger) totalBiaya += Math.ceil(luas * 0.8) * HARGA.hanger;
            if (furing) totalBiaya += Math.ceil(keliling / 4) * 15000; // estimasi furing
            
            // Jasa pemasangan
            totalBiaya += luas * HARGA.jasaPasang;

            document.getElementById('totalBiaya').innerHTML = `TOTAL BIAYA: Rp ${formatRupiah(totalBiaya)}`;

            // Tampilkan hasil
            document.getElementById('hasil').style.display = 'block';

            // BUAT VISUALISASI
            drawVisualisasiClean(
                panjang, lebar, 
                warnaPlafon === 'dua', lebarBorder,
                downlight, jumlahDownlight,
                ledStrip, posisiLED,
                lampuGantung,
                modelPlafon
            );

            // Scroll ke hasil
            document.getElementById('hasil').scrollIntoView({ behavior: 'smooth' });
        }

        function hitungPosisiDownlight(panjang, lebar, jumlah) {
            const posisi = [];
            
            // Hitung grid optimal
            const rows = Math.ceil(Math.sqrt(jumlah));
            const cols = Math.ceil(jumlah / rows);
            
            // Hitung jarak dari dinding
            const jarakSamping = panjang / (cols + 1);
            const jarakDepan = lebar / (rows + 1);
            const jarakAntarX = panjang / (cols + 1);
            const jarakAntarY = lebar / (rows + 1);
            
            for (let i = 0; i < jumlah; i++) {
                const row = Math.floor(i / cols);
                const col = i % cols;
                
                const x = jarakSamping * (col + 1);
                const y = jarakDepan * (row + 1);
                
                posisi.push({
                    x: x,
                    y: y,
                    jarakSamping: jarakSamping,
                    jarakDepan: jarakDepan,
                    jarakAntar: Math.min(jarakAntarX, jarakAntarY)
                });
            }
            
            return posisi;
        }

        function drawVisualisasiClean(P, L, isDuaWarna, borderWidth, hasDownlight, jumlahDownlight, hasLED, posisiLED, hasLampuGantung, modelPlafon) {
            const container = document.getElementById("visualCanvas");
            container.innerHTML = "";

            const width = 400;
            const height = 300;
            const padding = 40;

            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
            svg.setAttribute("preserveAspectRatio", "xMidYMid meet");
            svg.setAttribute("style", "background:#f8f9fa; border-radius:8px; width:100%; height:auto;");

            // Hitung scale agar proporsional
            const scale = Math.min(
                (width - 2 * padding) / P, 
                (height - 2 * padding) / L
            );
            
            const roomW = P * scale;
            const roomH = L * scale;

            // Center the room
            const x0 = (width - roomW) / 2;
            const y0 = (height - roomH) / 2;

            // WARNA PLAFON
            const borderColor = isDuaWarna ? "#2c3e50" : "#e0e0e0";
            const fieldColor = "#ffffff";

            if (isDuaWarna && borderWidth > 0) {
                const borderSize = borderWidth * scale;

                // Border area
                const borderRect = document.createElementNS(svgNS, "rect");
                borderRect.setAttribute("x", x0);
                borderRect.setAttribute("y", y0);
                borderRect.setAttribute("width", roomW);
                borderRect.setAttribute("height", roomH);
                borderRect.setAttribute("fill", borderColor);
                borderRect.setAttribute("rx", "8");
                borderRect.setAttribute("ry", "8");
                svg.appendChild(borderRect);

                // Field area
                const fieldRect = document.createElementNS(svgNS, "rect");
                fieldRect.setAttribute("x", x0 + borderSize);
                fieldRect.setAttribute("y", y0 + borderSize);
                fieldRect.setAttribute("width", roomW - 2 * borderSize);
                fieldRect.setAttribute("height", roomH - 2 * borderSize);
                fieldRect.setAttribute("fill", fieldColor);
                fieldRect.setAttribute("rx", "4");
                fieldRect.setAttribute("ry", "4");
                svg.appendChild(fieldRect);
            } else {
                // Single color
                const roomRect = document.createElementNS(svgNS, "rect");
                roomRect.setAttribute("x", x0);
                roomRect.setAttribute("y", y0);
                roomRect.setAttribute("width", roomW);
                roomRect.setAttribute("height", roomH);
                roomRect.setAttribute("fill", fieldColor);
                roomRect.setAttribute("rx", "8");
                roomRect.setAttribute("ry", "8");
                roomRect.setAttribute("stroke", borderColor);
                roomRect.setAttribute("stroke-width", "2");
                svg.appendChild(roomRect);
            }

            // DOWNLIGHT - titik lampu dengan POSISI PRESISI
            if (hasDownlight && jumlahDownlight > 0) {
                const posisi = hitungPosisiDownlight(P, L, jumlahDownlight);
                
                posisi.forEach((pos, i) => {
                    const cx = x0 + pos.x * scale;
                    const cy = y0 + pos.y * scale;
                    
                    // Lingkaran lampu
                    const lamp = document.createElementNS(svgNS, "circle");
                    lamp.setAttribute("cx", cx);
                    lamp.setAttribute("cy", cy);
                    lamp.setAttribute("r", "6");
                    lamp.setAttribute("fill", "#f1c40f");
                    lamp.setAttribute("stroke", "#f39c12");
                    lamp.setAttribute("stroke-width", "2");
                    svg.appendChild(lamp);
                    
                    // Label nomor lampu
                    const label = document.createElementNS(svgNS, "text");
                    label.setAttribute("x", cx);
                    label.setAttribute("y", cy - 10);
                    label.setAttribute("text-anchor", "middle");
                    label.setAttribute("font-size", "10");
                    label.setAttribute("font-weight", "bold");
                    label.setAttribute("fill", "#c0392b");
                    label.textContent = `L${i+1}`;
                    svg.appendChild(label);
                    
                    // Efek cahaya
                    const glow = document.createElementNS(svgNS, "circle");
                    glow.setAttribute("cx", cx);
                    glow.setAttribute("cy", cy);
                    glow.setAttribute("r", "12");
                    glow.setAttribute("fill", "none");
                    glow.setAttribute("stroke", "#f1c40f");
                    glow.setAttribute("stroke-width", "1");
                    glow.setAttribute("stroke-dasharray", "2,2");
                    svg.appendChild(glow);
                });
            }

            // LED STRIP
            if (hasLED) {
                if (posisiLED === 'lisTengah') {
                    // LED strip di lis tengah (sekitar ruangan)
                    const ledStrip = document.createElementNS(svgNS, "rect");
                    ledStrip.setAttribute("x", x0 - 2);
                    ledStrip.setAttribute("y", y0 - 2);
                    ledStrip.setAttribute("width", roomW + 4);
                    ledStrip.setAttribute("height", roomH + 4);
                    ledStrip.setAttribute("fill", "none");
                    ledStrip.setAttribute("stroke", "#e74c3c");
                    ledStrip.setAttribute("stroke-width", "3");
                    ledStrip.setAttribute("stroke-dasharray", "3,2");
                    ledStrip.setAttribute("rx", "10");
                    ledStrip.setAttribute("ry", "10");
                    svg.appendChild(ledStrip);
                } else {
                    // Cove lighting - di dalam plafon
                    const ledSize = 15;
                    const ledStrip = document.createElementNS(svgNS, "rect");
                    ledStrip.setAttribute("x", x0 + ledSize);
                    ledStrip.setAttribute("y", y0 + ledSize);
                    ledStrip.setAttribute("width", roomW - 2 * ledSize);
                    ledStrip.setAttribute("height", roomH - 2 * ledSize);
                    ledStrip.setAttribute("fill", "none");
                    ledStrip.setAttribute("stroke", "#9b59b6");
                    ledStrip.setAttribute("stroke-width", "2");
                    ledStrip.setAttribute("stroke-dasharray", "2,2");
                    ledStrip.setAttribute("rx", "6");
                    ledStrip.setAttribute("ry", "6");
                    svg.appendChild(ledStrip);
                }
            }

            // LAMPU GANTUNG
            if (hasLampuGantung) {
                const centerX = x0 + roomW / 2;
                const centerY = y0 + roomH / 2;
                
                // Kabel gantung
                const kabel = document.createElementNS(svgNS, "line");
                kabel.setAttribute("x1", centerX);
                kabel.setAttribute("y1", y0 - 20);
                kabel.setAttribute("x2", centerX);
                kabel.setAttribute("y2", centerY - 15);
                kabel.setAttribute("stroke", "#7f8c8d");
                kabel.setAttribute("stroke-width", "2");
                svg.appendChild(kabel);
                
                // Lampu gantung
                const lampu = document.createElementNS(svgNS, "circle");
                lampu.setAttribute("cx", centerX);
                lampu.setAttribute("cy", centerY);
                lampu.setAttribute("r", "10");
                lampu.setAttribute("fill", "#e67e22");
                lampu.setAttribute("stroke", "#d35400");
                lampu.setAttribute("stroke-width", "2");
                svg.appendChild(lampu);
            }

            // MODEL PLAFON
            if (modelPlafon === 'drop1') {
                // Drop single level - garis putus di dalam
                const dropLevel = document.createElementNS(svgNS, "rect");
                dropLevel.setAttribute("x", x0 + 10);
                dropLevel.setAttribute("y", y0 + 10);
                dropLevel.setAttribute("width", roomW - 20);
                dropLevel.setAttribute("height", roomH - 20);
                dropLevel.setAttribute("fill", "none");
                dropLevel.setAttribute("stroke", "#34495e");
                dropLevel.setAttribute("stroke-width", "2");
                dropLevel.setAttribute("stroke-dasharray", "5,3");
                dropLevel.setAttribute("rx", "6");
                dropLevel.setAttribute("ry", "6");
                svg.appendChild(dropLevel);
            } else if (modelPlafon === 'drop2') {
                // Drop multi level - dua level
                const dropLevel1 = document.createElementNS(svgNS, "rect");
                dropLevel1.setAttribute("x", x0 + 5);
                dropLevel1.setAttribute("y", y0 + 5);
                dropLevel1.setAttribute("width", roomW - 10);
                dropLevel1.setAttribute("height", roomH - 10);
                dropLevel1.setAttribute("fill", "none");
                dropLevel1.setAttribute("stroke", "#34495e");
                dropLevel1.setAttribute("stroke-width", "1");
                dropLevel1.setAttribute("stroke-dasharray", "3,2");
                dropLevel1.setAttribute("rx", "8");
                dropLevel1.setAttribute("ry", "8");
                svg.appendChild(dropLevel1);
                
                const dropLevel2 = document.createElementNS(svgNS, "rect");
                dropLevel2.setAttribute("x", x0 + 15);
                dropLevel2.setAttribute("y", y0 + 15);
                dropLevel2.setAttribute("width", roomW - 30);
                dropLevel2.setAttribute("height", roomH - 30);
                dropLevel2.setAttribute("fill", "none");
                dropLevel2.setAttribute("stroke", "#34495e");
                dropLevel2.setAttribute("stroke-width", "2");
                dropLevel2.setAttribute("stroke-dasharray", "4,2");
                dropLevel2.setAttribute("rx", "4");
                dropLevel2.setAttribute("ry", "4");
                svg.appendChild(dropLevel2);
            }

            // LEGENDA
            const legend = document.createElementNS(svgNS, "text");
            legend.setAttribute("x", width / 2);
            legend.setAttribute("y", height - 10);
            legend.setAttribute("text-anchor", "middle");
            legend.setAttribute("font-size", "12");
            legend.setAttribute("fill", "#7f8c8d");
            legend.textContent = `${P.toFixed(1)}m √ó ${L.toFixed(1)}m ‚Ä¢ ${modelPlafon}`;
            svg.appendChild(legend);

            container.appendChild(svg);
        }

        function formatRupiah(angka) {
            return new Intl.NumberFormat('id-ID').format(angka);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('downlightOptions').style.display = 'block';
        });
    </script>

    <script>
// Password protection - tambahkan di awal <body>
const PASSWORDS = ["tukang2025"];
let attempts = 0;
const maxAttempts = 3;

function checkPassword() {
    const input = prompt("üîê MASUKKAN KODE AKSES");
    
    if (PASSWORDS.includes(input)) {
        return true; // Password benar
    } else {
        attempts++;
        if (attempts < maxAttempts) {
            alert(`Kode salah! Percobaan ${attempts}/${maxAttempts}`);
            return checkPassword(); // Coba lagi
        } else {
            alert("Akses ditolak! Hubungi admin.");
            return false;
        }
    }
}

if (!checkPassword()) {
    document.body.innerHTML = `
        <div style="text-align:center; padding:50px; font-family:Arial;">
            <h1>‚õî AKSES DITOLAK</h1>
            <p>Anda tidak memiliki akses ke halaman ini.</p>
            <p><small>Hubungi administrator untuk mendapatkan kode akses.</small></p>
        </div>
    `;
}
</script>
</body>
</html>
